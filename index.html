<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìŠˆí¼ ë§ˆë¦¬ì˜¤ ì›¹ ê²Œì„</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        
        * {
            font-family: 'Press Start 2P', cursive;
        }
        
        .pixel-border {
            box-shadow: 
                inset -4px -4px 0px 0px #5a5a5a,
                inset 4px 4px 0px 0px #ffffff;
        }
        
        .mario-btn {
            background: linear-gradient(180deg, #e52521 0%, #b71c1c 100%);
            border: 4px solid #000;
            box-shadow: 4px 4px 0px #000;
            transition: all 0.1s;
        }
        
        .mario-btn:hover {
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #000;
        }
        
        .mario-btn:active {
            transform: translate(4px, 4px);
            box-shadow: 0px 0px 0px #000;
        }
        
        #gameCanvas {
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }
        
        .cloud {
            animation: float 6s ease-in-out infinite;
        }
        
        .cloud:nth-child(2) {
            animation-delay: -2s;
        }
        
        .cloud:nth-child(3) {
            animation-delay: -4s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes coin-spin {
            0% { transform: scaleX(1); }
            50% { transform: scaleX(0.1); }
            100% { transform: scaleX(1); }
        }
        
        .coin-spin {
            animation: coin-spin 0.5s ease-in-out infinite;
        }
        
        .leaderboard-row {
            transition: all 0.3s;
        }
        
        .leaderboard-row:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-gradient-to-b from-sky-400 to-sky-300 min-h-screen overflow-hidden">
    <!-- ë°°ê²½ êµ¬ë¦„ -->
    <div class="fixed inset-0 pointer-events-none overflow-hidden">
        <div class="cloud absolute top-20 left-[10%] w-24 h-12 bg-white rounded-full opacity-80"></div>
        <div class="cloud absolute top-32 left-[30%] w-32 h-16 bg-white rounded-full opacity-80"></div>
        <div class="cloud absolute top-16 left-[60%] w-28 h-14 bg-white rounded-full opacity-80"></div>
        <div class="cloud absolute top-40 left-[80%] w-20 h-10 bg-white rounded-full opacity-80"></div>
    </div>
    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="loginScreen" class="fixed inset-0 flex items-center justify-center z-50 bg-gradient-to-b from-sky-400 to-sky-300">
        <div class="bg-yellow-400 p-8 rounded-lg pixel-border border-4 border-black max-w-md w-full mx-4">
            <div class="text-center mb-8">
                <h1 class="text-2xl text-red-600 mb-2" style="text-shadow: 2px 2px 0px #000;">SUPER</h1>
                <h1 class="text-3xl text-red-600 mb-4" style="text-shadow: 2px 2px 0px #000;">MARIO</h1>
                <p class="text-xs text-gray-800">WEB GAME</p>
            </div>
            
            <div class="space-y-4">
                <input 
                    type="text" 
                    id="playerName" 
                    placeholder="ë‹‰ë„¤ì„ ì…ë ¥" 
                    maxlength="10"
                    class="w-full p-3 text-sm bg-white border-4 border-black rounded focus:outline-none focus:ring-2 focus:ring-red-500"
                >
                <button 
                    onclick="startGame()" 
                    class="mario-btn w-full py-4 text-white text-sm rounded"
                >
                    ğŸ® ê²Œì„ ì‹œì‘
                </button>
                <button 
                    onclick="showLeaderboard()" 
                    class="mario-btn w-full py-4 text-white text-sm rounded"
                    style="background: linear-gradient(180deg, #ffc107 0%, #ff9800 100%);"
                >
                    ğŸ† ìˆœìœ„ ë³´ê¸°
                </button>
            </div>
            
            <div class="mt-6 text-center">
                <p class="text-[8px] text-gray-700">ì¡°ì‘: â† â†’ ì´ë™ | SPACE ì í”„</p>
            </div>
        </div>
    </div>
    <!-- ê²Œì„ í™”ë©´ -->
    <div id="gameScreen" class="hidden fixed inset-0 flex flex-col items-center justify-center">
        <!-- ê²Œì„ ìƒíƒœë°” -->
        <div class="bg-black text-white px-6 py-2 rounded-lg mb-4 flex gap-8 text-xs">
            <div>
                <span class="text-yellow-400">MARIO</span>
                <span id="displayName" class="ml-2">---</span>
            </div>
            <div>
                <span class="text-yellow-400">SCORE</span>
                <span id="scoreDisplay" class="ml-2">000000</span>
            </div>
            <div>
                <span class="text-yellow-400">COINS</span>
                <span id="coinDisplay" class="ml-2">Ã—00</span>
            </div>
            <div>
                <span class="text-yellow-400">TIME</span>
                <span id="timeDisplay" class="ml-2">300</span>
            </div>
        </div>
        
        <!-- ê²Œì„ ìº”ë²„ìŠ¤ -->
        <canvas id="gameCanvas" class="border-4 border-black rounded-lg shadow-2xl"></canvas>
        
        <!-- ëª¨ë°”ì¼ ì»¨íŠ¸ë¡¤ -->
        <div class="mt-4 flex gap-4 md:hidden">
            <button id="leftBtn" class="mario-btn w-16 h-16 text-white text-2xl rounded">â†</button>
            <button id="jumpBtn" class="mario-btn w-20 h-16 text-white text-lg rounded">JUMP</button>
            <button id="rightBtn" class="mario-btn w-16 h-16 text-white text-2xl rounded">â†’</button>
        </div>
    </div>
    <!-- ê²Œì„ ì˜¤ë²„ / ìˆœìœ„ í™”ë©´ -->
    <div id="gameOverScreen" class="hidden fixed inset-0 flex items-center justify-center z-50 bg-black/80">
        <div class="bg-gradient-to-b from-blue-900 to-blue-800 p-8 rounded-lg pixel-border border-4 border-yellow-400 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <h2 id="gameOverTitle" class="text-2xl text-center text-yellow-400 mb-4" style="text-shadow: 2px 2px 0px #000;">GAME OVER</h2>
            
            <div id="finalScoreSection" class="text-center mb-6">
                <p class="text-white text-xs mb-2">YOUR SCORE</p>
                <p id="finalScore" class="text-3xl text-yellow-400 coin-spin">0</p>
            </div>
            
            <!-- ìˆœìœ„í‘œ -->
            <div class="bg-black/50 rounded-lg p-4 mb-6">
                <h3 class="text-yellow-400 text-center text-sm mb-4">ğŸ† TOP 10 RANKING ğŸ†</h3>
                <div id="leaderboardList" class="space-y-2 text-[10px]">
                    <div class="text-center text-gray-400">Loading...</div>
                </div>
            </div>
            
            <div class="flex gap-4">
                <button 
                    onclick="restartGame()" 
                    class="mario-btn flex-1 py-3 text-white text-xs rounded"
                >
                    ğŸ”„ ë‹¤ì‹œí•˜ê¸°
                </button>
                <button 
                    onclick="goToLogin()" 
                    class="mario-btn flex-1 py-3 text-white text-xs rounded"
                    style="background: linear-gradient(180deg, #4caf50 0%, #388e3c 100%);"
                >
                    ğŸ  ë©”ì¸ìœ¼ë¡œ
                </button>
            </div>
        </div>
    </div>
    <script>
        // Firebase ì„¤ì • (ë°ëª¨ìš© - ì‹¤ì œ ì‚¬ìš©ì‹œ ìì‹ ì˜ Firebase í”„ë¡œì íŠ¸ ì„¤ì •ìœ¼ë¡œ êµì²´)
        const firebaseConfig = {
            apiKey: "AIzaSyDqxDkZtlrTbti_xr81V_DFCVnPb383Twc",
  authDomain: "mario-game-1cc69.firebaseapp.com",
  projectId: "mario-game-1cc69",
  storageBucket: "mario-game-1cc69.firebasestorage.app",
  messagingSenderId: "497772009304",
  appId: "1:497772009304:web:e165d6b1a6b14f1e22372d",
  measurementId: "G-KV2EMQ5Q1D"
        };
        // Firebase ì´ˆê¸°í™”
        let db;
        let useFirebase = false;
        
        try {
            firebase.initializeApp(firebaseConfig);
            db = firebase.database();
            useFirebase = true;
        } catch (e) {
            console.log("Firebase ì—°ê²° ì‹¤íŒ¨ - ë¡œì»¬ ëª¨ë“œë¡œ ì‹¤í–‰");
            useFirebase = false;
        }
        // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê¸°ë°˜ ìˆœìœ„ (Firebase ì—†ì„ ë•Œ ëŒ€ì²´)
        let localScores = JSON.parse(localStorage.getItem('marioScores') || '[]');
        // ê²Œì„ ë³€ìˆ˜
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // ë°˜ì‘í˜• ìº”ë²„ìŠ¤ í¬ê¸°
        const maxWidth = Math.min(800, window.innerWidth - 32);
        const maxHeight = Math.min(450, window.innerHeight - 200);
        canvas.width = maxWidth;
        canvas.height = maxHeight;
        let playerName = '';
        let score = 0;
        let coins = 0;
        let gameTime = 300;
        let gameLoop;
        let timerInterval;
        let isGameRunning = false;
        // ê²Œì„ ì˜¤ë¸Œì íŠ¸
        const mario = {
            x: 50,
            y: canvas.height - 100,
            width: 32,
            height: 40,
            velocityX: 0,
            velocityY: 0,
            onGround: false,
            direction: 1,
            frame: 0,
            frameTimer: 0
        };
        const gravity = 0.6;
        const jumpForce = -14;
        const moveSpeed = 5;
        const friction = 0.8;
        // í”Œë«í¼
        let platforms = [];
        let coinItems = [];
        let enemies = [];
        let cameraX = 0;
        
        const levelWidth = 3200;
        // í‚¤ ì…ë ¥
        const keys = {
            left: false,
            right: false,
            jump: false
        };
        // ë ˆë²¨ ìƒì„±
        function generateLevel() {
            platforms = [];
            coinItems = [];
            enemies = [];
            
            // ë°”ë‹¥
            for (let i = 0; i < levelWidth; i += 40) {
                // êµ¬ë© ë§Œë“¤ê¸°
                if (i > 400 && Math.random() < 0.05 && i < levelWidth - 400) {
                    i += 80; // êµ¬ë© ê±´ë„ˆë›°ê¸°
                    continue;
                }
                platforms.push({ x: i, y: canvas.height - 40, width: 40, height: 40, type: 'ground' });
            }
            
            // ë¸”ë¡ í”Œë«í¼
            const blockPositions = [
                { x: 200, y: canvas.height - 140, count: 3 },
                { x: 400, y: canvas.height - 100, count: 5, hasQuestion: true },
                { x: 600, y: canvas.height - 180, count: 2 },
                { x: 800, y: canvas.height - 140, count: 4, hasQuestion: true },
                { x: 1000, y: canvas.height - 120, count: 3 },
                { x: 1200, y: canvas.height - 200, count: 2 },
                { x: 1400, y: canvas.height - 100, count: 6, hasQuestion: true },
                { x: 1700, y: canvas.height - 160, count: 3 },
                { x: 1900, y: canvas.height - 140, count: 4, hasQuestion: true },
                { x: 2100, y: canvas.height - 180, count: 2 },
                { x: 2300, y: canvas.height - 120, count: 5, hasQuestion: true },
                { x: 2600, y: canvas.height - 160, count: 3 },
                { x: 2800, y: canvas.height - 200, count: 4, hasQuestion: true },
            ];
            
            blockPositions.forEach(block => {
                for (let i = 0; i < block.count; i++) {
                    const type = block.hasQuestion && i === Math.floor(block.count / 2) ? 'question' : 'brick';
                    platforms.push({
                        x: block.x + i * 40,
                        y: block.y,
                        width: 40,
                        height: 40,
                        type: type,
                        hit: false
                    });
                }
            });
            
            // ì½”ì¸ ë°°ì¹˜
            for (let i = 300; i < levelWidth - 200; i += 150) {
                if (Math.random() < 0.6) {
                    coinItems.push({
                        x: i + Math.random() * 100,
                        y: canvas.height - 120 - Math.random() * 100,
                        width: 24,
                        height: 24,
                        collected: false,
                        frame: 0
                    });
                }
            }
            
            // ì  ë°°ì¹˜
            for (let i = 500; i < levelWidth - 300; i += 300) {
                if (Math.random() < 0.5) {
                    enemies.push({
                        x: i,
                        y: canvas.height - 70,
                        width: 32,
                        height: 32,
                        velocityX: -1.5,
                        alive: true,
                        frame: 0
                    });
                }
            }
            
            // ê¹ƒë°œ (ê³¨ì¸ ì§€ì )
            platforms.push({
                x: levelWidth - 100,
                y: canvas.height - 240,
                width: 10,
                height: 200,
                type: 'flag'
            });
        }
        // ê²Œì„ ì‹œì‘
        function startGame() {
            playerName = document.getElementById('playerName').value.trim() || 'PLAYER';
            document.getElementById('displayName').textContent = playerName.toUpperCase();
            
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('gameScreen').classList.remove('hidden');
            document.getElementById('gameOverScreen').classList.add('hidden');
            
            resetGame();
            isGameRunning = true;
            gameLoop = requestAnimationFrame(update);
            
            timerInterval = setInterval(() => {
                if (isGameRunning && gameTime > 0) {
                    gameTime--;
                    document.getElementById('timeDisplay').textContent = gameTime.toString().padStart(3, '0');
                    if (gameTime <= 0) {
                        gameOver();
                    }
                }
            }, 1000);
        }
        function resetGame() {
            score = 0;
            coins = 0;
            gameTime = 300;
            cameraX = 0;
            
            mario.x = 50;
            mario.y = canvas.height - 100;
            mario.velocityX = 0;
            mario.velocityY = 0;
            mario.onGround = false;
            
            generateLevel();
            updateUI();
        }
        function updateUI() {
            document.getElementById('scoreDisplay').textContent = score.toString().padStart(6, '0');
            document.getElementById('coinDisplay').textContent = 'Ã—' + coins.toString().padStart(2, '0');
            document.getElementById('timeDisplay').textContent = gameTime.toString().padStart(3, '0');
        }
        // ê²Œì„ ì—…ë°ì´íŠ¸
        function update() {
            if (!isGameRunning) return;
            
            // ì…ë ¥ ì²˜ë¦¬
            if (keys.left) mario.velocityX = -moveSpeed;
            else if (keys.right) mario.velocityX = moveSpeed;
            else mario.velocityX *= friction;
            
            if (keys.jump && mario.onGround) {
                mario.velocityY = jumpForce;
                mario.onGround = false;
            }
            
            // ë¬¼ë¦¬
            mario.velocityY += gravity;
            mario.x += mario.velocityX;
            mario.y += mario.velocityY;
            
            // ë°©í–¥
            if (mario.velocityX > 0.5) mario.direction = 1;
            else if (mario.velocityX < -0.5) mario.direction = -1;
            
            // ì• ë‹ˆë©”ì´ì…˜
            mario.frameTimer++;
            if (mario.frameTimer > 8) {
                mario.frame = (mario.frame + 1) % 3;
                mario.frameTimer = 0;
            }
            
            // ì¹´ë©”ë¼
            const targetCameraX = mario.x - canvas.width / 3;
            cameraX = Math.max(0, Math.min(targetCameraX, levelWidth - canvas.width));
            
            // ê²½ê³„
            if (mario.x < 0) mario.x = 0;
            if (mario.x > levelWidth - mario.width) mario.x = levelWidth - mario.width;
            
            // ë–¨ì–´ì§
            if (mario.y > canvas.height + 50) {
                gameOver();
                return;
            }
            
            mario.onGround = false;
            
            // í”Œë«í¼ ì¶©ëŒ
            platforms.forEach(platform => {
                if (platform.type === 'flag') {
                    if (mario.x + mario.width > platform.x && mario.x < platform.x + platform.width) {
                        score += 5000;
                        gameOver(true);
                        return;
                    }
                }
                
                if (checkCollision(mario, platform)) {
                    // ìœ„ì—ì„œ ì¶©ëŒ
                    if (mario.velocityY > 0 && mario.y + mario.height - mario.velocityY <= platform.y) {
                        mario.y = platform.y - mario.height;
                        mario.velocityY = 0;
                        mario.onGround = true;
                    }
                    // ì•„ë˜ì—ì„œ ì¶©ëŒ
                    else if (mario.velocityY < 0 && mario.y - mario.velocityY >= platform.y + platform.height) {
                        mario.y = platform.y + platform.height;
                        mario.velocityY = 0;
                        
                        if (platform.type === 'question' && !platform.hit) {
                            platform.hit = true;
                            score += 200;
                            coins++;
                            updateUI();
                        }
                    }
                    // ì˜†ì—ì„œ ì¶©ëŒ
                    else {
                        if (mario.velocityX > 0) mario.x = platform.x - mario.width;
                        else if (mario.velocityX < 0) mario.x = platform.x + platform.width;
                        mario.velocityX = 0;
                    }
                }
            });
            
            // ì½”ì¸ ìˆ˜ì§‘
            coinItems.forEach(coin => {
                if (!coin.collected && checkCollision(mario, coin)) {
                    coin.collected = true;
                    coins++;
                    score += 100;
                    updateUI();
                }
                coin.frame = (coin.frame + 0.2) % 4;
            });
            
            // ì  ì—…ë°ì´íŠ¸ ë° ì¶©ëŒ
            enemies.forEach(enemy => {
                if (!enemy.alive) return;
                
                enemy.x += enemy.velocityX;
                enemy.frame = (enemy.frame + 0.1) % 2;
                
                // ì ì´ ë²½ì— ë¶€ë”ªíˆë©´ ë°©í–¥ ì „í™˜
                platforms.forEach(p => {
                    if (p.type !== 'ground') return;
                    if (enemy.x <= p.x || enemy.x + enemy.width >= p.x + p.width) {
                        // ê°€ì¥ìë¦¬ ê°ì§€ ê°„ì†Œí™”
                    }
                });
                
                // í”Œë ˆì´ì–´ì™€ ì¶©ëŒ
                if (checkCollision(mario, enemy)) {
                    // ìœ„ì—ì„œ ë°ŸìŒ
                    if (mario.velocityY > 0 && mario.y + mario.height - 10 < enemy.y + enemy.height / 2) {
                        enemy.alive = false;
                        mario.velocityY = jumpForce / 2;
                        score += 500;
                        updateUI();
                    } else {
                        // ì˜†ì—ì„œ ë¶€ë”ªí˜
                        gameOver();
                        return;
                    }
                }
            });
            
            // ê·¸ë¦¬ê¸°
            draw();
            
            gameLoop = requestAnimationFrame(update);
        }
        function checkCollision(a, b) {
            return a.x < b.x + b.width &&
                   a.x + a.width > b.x &&
                   a.y < b.y + b.height &&
                   a.y + a.height > b.y;
        }
        // ê·¸ë¦¬ê¸°
        function draw() {
            // ë°°ê²½
            ctx.fillStyle = '#5c94fc';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ë°°ê²½ ì‚°
            ctx.fillStyle = '#228b22';
            for (let i = -1; i < 5; i++) {
                const hillX = i * 300 - (cameraX * 0.3) % 300;
                ctx.beginPath();
                ctx.moveTo(hillX, canvas.height - 40);
                ctx.lineTo(hillX + 150, canvas.height - 150);
                ctx.lineTo(hillX + 300, canvas.height - 40);
                ctx.fill();
            }
            
            // êµ¬ë¦„
            ctx.fillStyle = '#fff';
            for (let i = 0; i < 6; i++) {
                const cloudX = i * 250 - (cameraX * 0.2) % 250;
                drawCloud(cloudX, 50 + (i % 3) * 30);
            }
            
            ctx.save();
            ctx.translate(-cameraX, 0);
            
            // í”Œë«í¼
            platforms.forEach(platform => {
                if (platform.x + platform.width < cameraX - 50 || platform.x > cameraX + canvas.width + 50) return;
                
                if (platform.type === 'ground') {
                    // í™/ì”ë”” ë¸”ë¡
                    ctx.fillStyle = '#8b4513';
                    ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    ctx.fillStyle = '#228b22';
                    ctx.fillRect(platform.x, platform.y, platform.width, 10);
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(platform.x, platform.y, platform.width, platform.height);
                } else if (platform.type === 'brick') {
                    // ë²½ëŒ
                    ctx.fillStyle = '#cd853f';
                    ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    ctx.strokeStyle = '#8b4513';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(platform.x, platform.y, platform.width, platform.height);
                    ctx.beginPath();
                    ctx.moveTo(platform.x + 20, platform.y);
                    ctx.lineTo(platform.x + 20, platform.y + platform.height);
                    ctx.moveTo(platform.x, platform.y + 20);
                    ctx.lineTo(platform.x + platform.width, platform.y + 20);
                    ctx.stroke();
                } else if (platform.type === 'question') {
                    // ? ë¸”ë¡
                    ctx.fillStyle = platform.hit ? '#8b4513' : '#ffd700';
                    ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    ctx.strokeStyle = '#000';
                    ctx.lineWidth = 2;
                    ctx.strokeRect(platform.x, platform.y, platform.width, platform.height);
                    if (!platform.hit) {
                        ctx.fillStyle = '#fff';
                        ctx.font = 'bold 20px Arial';
                        ctx.fillText('?', platform.x + 12, platform.y + 28);
                    }
                } else if (platform.type === 'flag') {
                    // ê¹ƒë°œ
                    ctx.fillStyle = '#228b22';
                    ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    ctx.fillStyle = '#ff0000';
                    ctx.beginPath();
                    ctx.moveTo(platform.x + platform.width, platform.y);
                    ctx.lineTo(platform.x + platform.width + 40, platform.y + 25);
                    ctx.lineTo(platform.x + platform.width, platform.y + 50);
                    ctx.fill();
                }
            });
            
            // ì½”ì¸
            coinItems.forEach(coin => {
                if (coin.collected) return;
                if (coin.x + coin.width < cameraX - 50 || coin.x > cameraX + canvas.width + 50) return;
                
                const scaleX = Math.cos(coin.frame * Math.PI / 2);
                ctx.save();
                ctx.translate(coin.x + coin.width / 2, coin.y + coin.height / 2);
                ctx.scale(scaleX, 1);
                
                ctx.fillStyle = '#ffd700';
                ctx.beginPath();
                ctx.arc(0, 0, 12, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = '#b8860b';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                ctx.restore();
            });
            
            // ì  (êµ¼ë°”)
            enemies.forEach(enemy => {
                if (!enemy.alive) return;
                if (enemy.x + enemy.width < cameraX - 50 || enemy.x > cameraX + canvas.width + 50) return;
                
                // ëª¸í†µ
                ctx.fillStyle = '#8b4513';
                ctx.beginPath();
                ctx.arc(enemy.x + 16, enemy.y + 20, 16, 0, Math.PI * 2);
                ctx.fill();
                
                // ë°œ
                ctx.fillStyle = '#654321';
                ctx.fillRect(enemy.x + 4, enemy.y + 28, 10, 6);
                ctx.fillRect(enemy.x + 18, enemy.y + 28, 10, 6);
                
                // ëˆˆ
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(enemy.x + 10, enemy.y + 15, 5, 0, Math.PI * 2);
                ctx.arc(enemy.x + 22, enemy.y + 15, 5, 0, Math.PI * 2);
                ctx.fill();
                ctx.fillStyle = '#000';
                ctx.beginPath();
                ctx.arc(enemy.x + 10, enemy.y + 16, 2, 0, Math.PI * 2);
                ctx.arc(enemy.x + 22, enemy.y + 16, 2, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // ë§ˆë¦¬ì˜¤
            drawMario();
            
            ctx.restore();
        }
        function drawCloud(x, y) {
            ctx.beginPath();
            ctx.arc(x + 25, y + 20, 25, 0, Math.PI * 2);
            ctx.arc(x + 55, y + 15, 30, 0, Math.PI * 2);
            ctx.arc(x + 85, y + 20, 25, 0, Math.PI * 2);
            ctx.arc(x + 45, y + 35, 20, 0, Math.PI * 2);
            ctx.arc(x + 